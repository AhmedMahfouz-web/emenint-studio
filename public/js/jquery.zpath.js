!function(t){var n=1,e=[],r={action:"start",drawTime:3e3,draw:"all",delay:20,id:1,shuffle:!1};t.fn.zPath=function(e){var i,l=this;i=t.extend({},r,e),t(l).each(function(){var e=t(this);i.id=n,"start"==i.action?(s(e,i),e.attr("data-id",n),a(e,i),n++):"destroy"==i.action&&o(e,e.attr("data-id"))})};var a=function(n,i){var r=i.drawTime,s=i.draw,o=i.id,h=i.delay,u=i.delay;if(1==i.shuffle&&c.arrayShuffle(e),"all"==s)n.children().each(function(){t(this).is("g")?a(t(this),i):t(this).is("path")?l.path(t(this),r):t(this).is("rect")?l.rect(t(this),r):t(this).is("circle")?l.circle(t(this),r):t(this).is("line")?l.line(t(this),r):t(this).is("polygon")&&l.polygon(t(this),r)});else if("delayed"==s||"1by1"==s)for("1by1"==s&&(u=r),f=0;f<=e.length-1;f++)c.idCompare(e[f],o)&&(setTimeout(function(n){return function(){t("."+n).is("path")?l.path(t("."+n),r):t("."+n).is("rect")?l.rect(t("."+n),r):t("."+n).is("circle")?l.circle(t("."+n),r):t("."+n).is("line")?l.line(t("."+n),r):t("."+n).is("polygon")&&l.polygon(t("."+n),r)}}(e[f]),h),h+=u);else if("terminus"==s||"terminusDelayed"==s)for(var f=0,g=e.length-1;f<=e.length/2&&g>=e.length/2;f++,g--)c.idCompare(e[f],o)&&(setTimeout(function(n,e){return function(){t("."+n).is("path")?l.path(t("."+n),r):t("."+n).is("rect")?l.rect(t("."+n),r):t("."+n).is("circle")?l.circle(t("."+n),r):t("."+n).is("line")?l.line(t("."+n),r):t("."+n).is("polygon")&&l.polygon(t("."+n),r),t("."+e).is("path")?l.path(t("."+e),r):t("."+e).is("rect")?l.rect(t("."+e),r):t("."+e).is("circle")?l.circle(t("."+e),r):t("."+e).is("line")?l.line(t("."+e),r):t("."+e).is("polygon")&&l.polygon(t("."+e),r)}}(e[f],e[g]),h),h+="terminusDelayed"!=s?r:u);else{var p,d,y=[],m=[];if(s.indexOf("by")>=0)for(y=s.split("by"),p=Number(y[0]),d=y[1],f=0;f<=e.length-1;f+=p)if(c.idCompare(e[f],o)){for(g=0;g<p;g++)m.push(e[f+g]);setTimeout(function(n){return function(){for(var e=0;e<p;e++)t("."+n[e]).is("path")?l.path(t("."+n[e]),r):t("."+n[e]).is("rect")?l.rect(t("."+n[e]),r):t("."+n[e]).is("circle")?l.circle(t("."+n[e]),r):t("."+n[e]).is("line")?l.line(t("."+n[e]),r):t("."+n[e]).is("polygon")&&l.polygon(t("."+n[e]),r)}}(m),h),m=[],d.indexOf("Delayed")>=0?h+=u:h+=r}}},s=function(i,r){i.children().each(function(){var i=c.randomClass();t(this).attr("class",i+"_"+n),e.push(i+"_"+n),t(this).is("g")?s(t(this)):t(this).is("path")?h.path(t(this)):t(this).is("rect")?h.rect(t(this)):t(this).is("circle")?h.circle(t(this)):t(this).is("line")?h.line(t(this)):t(this).is("polygon")&&h.polygon(t(this))})},o=function(n,r){var a=[];for(i=0;i<=e.length-1;i++)a=e[i].split("_"),r==Number(a[a.length-1])&&c.destroy(t("."+e[i]));e=[]},l={path:function(t,n){c.dashDraw(t,n)},rect:function(t,n){c.dashDraw(t,n)},circle:function(t,n){c.dashDraw(t,n)},line:function(t,n){c.dashDraw(t,n)},polygon:function(t,n){c.dashDraw(t,n)}},h={path:function(t){var n=c.getPathLength(t);c.dashClear(t,n)},rect:function(t){c.dashClear(t,c.getRectLength(t))},circle:function(t){c.dashClear(t,c.getCircleLength(t))},line:function(t){c.dashClear(t,c.getLineLength(t))},polygon:function(t){c.dashClear(t,c.getPolygonLength(t))}},c={getRectLength:function(t){return 2*t.attr("width")+2*t.attr("height")},getPolygonLength:function(t){var n=t.attr("points");n=n.split(" ");for(var e,i,r,a,s=null,o=null,l=0,h=0;h<n.length;h++){var c=n[h].split(",");null==s&&null==o?(/(\r\n|\n|\r)/gm.test(c[0])&&(c[0]=c[0].replace(/(\r\n|\n|\r)/gm,""),c[0]=c[0].replace(/\s+/g,"")),/(\r\n|\n|\r)/gm.test(c[1])&&(c[0]=c[1].replace(/(\r\n|\n|\r)/gm,""),c[0]=c[1].replace(/\s+/g,"")),s=c[0],o=c[1],r=c[0],a=c[1]):""!=c[0]&&""!=c[1]&&isNaN(c)&&(/(\r\n|\n|\r)/gm.test(c[0])&&(c[0]=c[0].replace(/(\r\n|\n|\r)/gm,""),c[0]=c[0].replace(/\s+/g,"")),/(\r\n|\n|\r)/gm.test(c[1])&&(c[0]=c[1].replace(/(\r\n|\n|\r)/gm,""),c[0]=c[1].replace(/\s+/g,"")),e=c[0],i=c[1],l+=Math.sqrt(Math.pow(e-s,2)+Math.pow(i-o,2)),s=e,o=i,h==n.length-2&&(l+=Math.sqrt(Math.pow(r-s,2)+Math.pow(a-o,2))))}return l},getLineLength:function(t){var n=t.attr("x1"),e=t.attr("x2"),i=t.attr("y1"),r=t.attr("y2");return Math.sqrt(Math.pow(e-n,2)+Math.pow(r-i,2))},getCircleLength:function(t){var n=t.attr("r");return 2*Math.PI*n},clearFill:function(t){t.css({"fill-opacity":"0"})},drawFill:function(t,n){t.animate({"fill-opacity":1},{duration:n})},dashClear:function(t,n){t.css({"stroke-dasharray":n+"px","stroke-dashoffset":n+"px"})},destroy:function(t){t.stop().css({"stroke-dashoffset":"0px"})},dashDraw:function(t,n){t.animate({"stroke-dashoffset":0},{queue:!1,duration:n})},getPathLength:function(t){return t.get(0).getTotalLength()},randomClass:function(){return"z-"+Math.random().toString(36).substr(2,6)},idCompare:function(t,n){var e;return e=t.split("_"),Number(e[1])==n},arrayShuffle:function(t){for(var n,e,i=t.length;i;n=parseInt(Math.random()*i),e=t[--i],t[i]=t[n],t[n]=e);return t},randomColor:function(){return"#"+Math.floor(16777215*Math.random()).toString(16)}}}(jQuery);